(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dcdeb06"],{"3e0a":function(t,e,a){"use strict";var s=a("9571"),r=a.n(s);r.a},9571:function(t,e,a){},a92a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._m(0),a("div",{staticClass:"row justify-content-center"},[a("div",t._b({staticClass:"col-md-8"},"div",t.getProduct,!1),[a("h1",{staticClass:"text-center"},[t._v("結帳清單")]),a("table",{staticClass:"table table-striped"},[t._m(1),a("tbody",t._l(t.getProduct.carts,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v("\n            "+t._s(e.product.title)+"\n            "),e.coupon?a("div",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+" 本")]),a("td",{staticClass:"align-middle"},[t._v(t._s(t._f("currency")(e.final_total)))])])}),0),a("tfoot",[a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("總計")]),a("td",[t._v(t._s(t._f("currency")(t.getProduct.final_total)))])])])])])]),a("div",{staticClass:"row justify-content-center"},[a("form",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(t._s("電子郵件欄位不正確"))]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v(t._s("欄位的姓名不正確"))]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.phone,expression:"form.user.phone"},{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"form-control",attrs:{type:"tel",id:"usertel",name:"tel",placeholder:"請輸入電話"},domProps:{value:t.form.user.phone},on:{input:function(e){e.target.composing||t.$set(t.form.user,"phone",e.target.value)}}}),t.errors.has("tel")?a("span",{staticClass:"text-danger"},[t._v(t._s("欄位的電話不正確"))]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required|",expression:"'required|'"}],staticClass:"form-control",attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"text-right d-flex justify-content-between"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.back(e)}}},[t._v("回上頁")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.createOrder(e)}}},[t._v("送出訂單")])])])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-md col-12"},[a("div",{staticClass:"alert alert-primary text-center text-primary rounded",attrs:{role:"alert"}},[t._v("第一步: 輸入資料")])]),a("div",{staticClass:"col-md col-12"},[a("div",{staticClass:"alert alert-light text-center rounded",attrs:{role:"alert"}},[t._v("第二步: 金流付款")])]),a("div",{staticClass:"col-md col-12"},[a("div",{staticClass:"alert alert-light text-center rounded",attrs:{role:"alert"}},[t._v("第三步: 完成付款")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])}],o=(a("1157"),{data:function(){return{products:[],product:{},getProduct:{},isLoading:!1,status:{loadingItem:""},form:{user:{name:"",email:"",phone:"",address:""},message:""}}},methods:{getCart:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/cart");this.$http.get(e).then(function(e){t.getProduct=e.data.data,t.status.loadingItem=""})},deleteCartItem:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/cart/").concat(t);e.isLoading=!0,this.$http.delete(a).then(function(t){console.log(e.getProduct),e.getCart(),e.isLoading=!1})},checkCoupon:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/coupon"),a={code:t.couponCode};this.$http.post(e,{data:a}).then(function(e){t.getCart()})},createOrder:function(){var t=this,e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/order"),s=e.form;e.isLoading=!0,this.$validator.validate().then(function(r){r&&t.$http.post(a,{data:s}).then(function(t){console.log("check",t),e.isLoading=!0,t.data.success&&(console.log(t.data.orderId),e.$router.push("checklist/".concat(t.data.orderId)),e.isLoading=!1)})})},back:function(){this.$router.go(-1)}},created:function(){this.getCart()}}),i=o,n=(a("3e0a"),a("2877")),l=Object(n["a"])(i,s,r,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2dcdeb06.83da97c5.js.map