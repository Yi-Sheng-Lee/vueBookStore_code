(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f90f3e7"],{"223a":function(t,a,e){"use strict";var s=e("e9a0"),i=e.n(s);i.a},"4a2f":function(t,a,e){"use strict";var s=e("dfbe"),i=e.n(s);i.a},"56a6":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"message-alert"},t._l(t.messages,function(a,s){return e("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+a.status},[t._v("\n    "+t._s(a.message)+"\n    "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){return t.removeMessage(s)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}),0)},i=[],o=(e("ac6a"),{name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,a){var e=Math.floor(new Date/1e3);this.messages.push({message:t,status:a,timestamp:e}),this.removeMessageWithTiming(e)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var a=this;setTimeout(function(){a.messages.forEach(function(e,s){e.timestamp===t&&a.messages.splice(s,1)})},5e3)}},created:function(){var t=this;t.$bus.$on("messsage:push",function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(a,e)})}}),n=o,r=(e("4a2f"),e("2877")),c=Object(r["a"])(n,s,i,!1,null,null,null);a["a"]=c.exports},"57e9":function(t,a,e){"use strict";var s=e("5dd4"),i=e.n(s);i.a},"5dd4":function(t,a,e){},"753a":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"row container"},[e("div",{staticClass:"col-md-6 text-center"},[e("img",{staticClass:"img-fluid",attrs:{src:t.product.imgURL,alt:""}})]),e("div",{staticClass:"col-md-6"},[e("ul",{staticClass:"list-group"},[e("li",{staticClass:"list-group-item border-0 pl-0"},[e("h4",{staticClass:"text-primary"},[t._v(t._s(t.product.title))])]),e("li",{staticClass:"list-group-item border-0 pl-0"},[e("span",[t._v("語言 :  ")]),t._v("\n          "+t._s(t.product.language)+"\n        ")]),e("li",{staticClass:"list-group-item border-0 pl-0"},[e("span",[t._v("定價 :  ")]),t._v("\n          "+t._s(t._f("currency")(t.product.origin_price))+"\n        ")]),e("li",{staticClass:"list-group-item border-0 pl-0"},[e("span",[t._v("優惠價 :  ")]),t._v("\n          "+t._s(t._f("currency")(t.product.price))+"\n        ")]),e("li",{staticClass:"list-group-item border-0 pl-0"},[e("span",[t._v("商品說明 :  ")]),t._v("\n          "+t._s(t.product.description)+"\n        ")]),e("li",{staticClass:"list-group-item border-0 pl-0"},[e("div",{staticClass:"d-flex justify-content-between"},[e("form",{staticClass:"form-inline mr-5"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"form-control form-control-sm",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.count=a.target.multiple?e:e[0]}}},t._l(10,function(a){return e("option",{key:a,domProps:{value:a}},[t._v("選購 "+t._s(a)+" 本")])}),0)]),e("div",{staticClass:"d-flex align-items-center "},[e("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("\n                小計\n                "),e("strong",[t._v(t._s(t._f("currency")(t.count*t.product.price)))]),t._v(" 元\n              ")]),e("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.addToCart(t.product.id,t.count)}}},[t._v("\n              加到購物車\n                "),t.product.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()])])])])])])]),e("Cart")],1)},i=[],o=e("1157"),n=e.n(o),r=e("56a6"),c=e("b3b1"),l={data:function(){return{productId:"",count:1,product:{},status:{loadingItem:""},isLoading:!1}},components:{Alert:r["a"],Cart:c["a"]},methods:{getSingleItem:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/product/").concat(a.productId);a.status.loadingItem=t,a.isLoading=!0,this.$http.get(e).then(function(t){a.isLoading=!1,a.product=t.data.product,a.getCart(),console.log(a.product)})},addToCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/cart"),i={product_id:t,qty:a};e.status.loadingItem=t,this.$http.post(s,{data:i}).then(function(t){e.status.loadingItem="",n()("#productModal").modal("hide"),t.data.success&&(e.$bus.$emit("messsage:push",t.data.message),e.getCart())})},getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/cart");this.$http.get(a).then(function(a){t.getProduct=a.data.data,t.status.loadingItem="",t.$bus.$emit("orderEvent",t.getProduct)})}},created:function(){this.productId=this.$route.params.bookid,this.getSingleItem(this.productId)}},u=l,d=(e("57e9"),e("2877")),p=Object(d["a"])(u,s,i,!1,null,"002ca2f5",null);a["default"]=p.exports},ac6a:function(t,a,e){for(var s=e("cadf"),i=e("0d58"),o=e("2aba"),n=e("7726"),r=e("32e9"),c=e("84f2"),l=e("2b4c"),u=l("iterator"),d=l("toStringTag"),p=c.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=i(m),h=0;h<v.length;h++){var f,g=v[h],C=m[g],_=n[g],b=_&&_.prototype;if(b&&(b[u]||r(b,u,p),b[d]||r(b,d,g),c[g]=p,C))for(f in s)b[f]||o(b,f,s[f],!0)}},b3b1:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"cart-car"},[t._m(0),e("p",{staticClass:"nums"},[t._v(t._s(t.len))])]),e("div",{staticClass:"modal fade",attrs:{id:"cartModal",tabindex:"-1",role:"dialog","aria-labelledby":"cartModalTitle","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(1),e("div",{staticClass:"modal-body"},[e("div",t._b({staticClass:"w-75 mx-auto my-5"},"div",t.getProduct,!1),[0===t.len?e("div",{staticClass:"text-center"},[e("h4",[t._v("購物車已空，快去購物吧")])]):e("table",{staticClass:"table"},[t._m(2),e("tbody",t._l(t.tempProduct.carts,function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.deleteCartItem(a.id)}}},[e("i",{staticClass:"far fa-trash-alt"})])]),e("td",{staticClass:"align-middle"},[t._v("\n                    "+t._s(a.product.title)+"\n                    "),a.coupon?e("div",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty))]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(Math.floor(a.final_total)))])])}),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),e("td",{staticClass:"text-right"},[t._v(t._s(t.tempProduct.total))])]),t.tempProduct.final_total!==t.tempProduct.total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),e("td",{staticClass:"text-right text-success"},[t._v(t._s(Math.floor(t.tempProduct.final_total)))])]):t._e()])]),0!==t.len?e("div",{staticClass:"input-group mb-3 input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼 (試試看 tantan 吧)"},domProps:{value:t.couponCode},on:{input:function(a){a.target.composing||(t.couponCode=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.checkCoupon}},[t._v("套用優惠碼")])])]):t._e()])]),0!==t.len?e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.goCheck}},[t._v("結帳去")])]):t._e()])])])])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#cartModal"}},[e("i",{staticClass:"fas fa-shopping-cart fa-2x"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"cartModalTitle"}},[t._v("購買清單")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("th"),e("th",[t._v("品名")]),e("th",[t._v("數量")]),e("th",[t._v("單價")])])}],o=(e("1157"),{data:function(){return{getProduct:{},couponCode:"",tempProduct:{},len:0}},methods:{getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/cart");this.$http.get(a).then(function(a){t.getProduct=a.data.data,t.tempProduct=a.data.data,t.len=a.data.data.carts.length})},deleteCartItem:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/cart/").concat(t);this.$http.delete(e).then(function(t){a.getCart()})},checkCoupon:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/coupon"),e={code:t.couponCode};this.$http.post(a,{data:e}).then(function(a){t.getCart()})},goCheck:function(){this.$router.push("/checkorder")}},created:function(){var t=this;t.getCart(),t.$bus.$on("orderEvent",function(a){t.tempProduct=a,t.len=a.carts.length})}}),n=o,r=(e("223a"),e("2877")),c=Object(r["a"])(n,s,i,!1,null,null,null);a["a"]=c.exports},dfbe:function(t,a,e){},e9a0:function(t,a,e){}}]);
//# sourceMappingURL=chunk-5f90f3e7.fa50a688.js.map